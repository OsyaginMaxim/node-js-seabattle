var socket = io();


(function(w,h) {
    let p1map = ["~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~"];

    let p2map = ["~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~",
        "~", "~", "~", "~", "~", "~", "~", "~", "~", "~"];

    let p1 = document.querySelector("#battlefield1");//.player1 > #battlefield1');
    let p2 = document.querySelector("#battlefield2");//.player2 > #battlefield2');

    for (i = 0;i < w;i++)
        for (j = 0;j < h;j++){
            div1 = document.createElement("div");
            div1.id = i + '_' +j;
            div1.className = (p1map[i*w+j] === 's') ? 's': 'w';
            p1.appendChild(div1);
            div2 = document.createElement('div');
            div2.className = (p2map[i*w+j] === 's') ? 's': 'w';
            div2.onclick = function () {
              socket.emit('fire', {pound:'p1map[i][j]'});
            };
            p2.appendChild(div2);
        }

        socket.on('isKill', function (data) {
          if(isnotkillship(data)){
              socket.emit('notkill', data);
          }
          socket.emit('kill', data);
        })




})(10,10);
